(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/modules/offline-exporting",["highcharts","highcharts/modules/exporting"],function(a){b(a);b.Highcharts=a;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function c(f,g,d,h){f.hasOwnProperty(g)||(f[g]=h.apply(null,d),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:g,module:f[g]}})))}b=b?b._modules:{};c(b,"Extensions/DownloadURL.js",[b["Core/Globals.js"]],function(g){var h=g.isSafari,f=g.win,j=f.document,d=f.URL||f.webkitURL||f,i=g.dataURLtoBlob=function(e){if((e=e.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<e.length&&f.atob&&f.ArrayBuffer&&f.Uint8Array&&f.Blob&&d.createObjectURL){var k=f.atob(e[3]),l=new f.ArrayBuffer(k.length);l=new f.Uint8Array(l);for(var m=0;m<l.length;++m){l[m]=k.charCodeAt(m)}e=new f.Blob([l],{type:e[1]});return d.createObjectURL(e)}};g=g.downloadURL=function(k,e){var o=f.navigator,q=j.createElement("a");if("string"===typeof k||k instanceof String||!o.msSaveOrOpenBlob){k="".concat(k);o=/Edge\/\d+/.test(o.userAgent);if(h&&"string"===typeof k&&0===k.indexOf("data:application/pdf")||o||2000000<k.length){if(k=i(k)||"",!k){throw Error("Failed to convert to blob")}}if("undefined"!==typeof q.download){q.href=k,q.download=e,j.body.appendChild(q),q.click(),j.body.removeChild(q)}else{try{var p=f.open(k,"chart");if("undefined"===typeof p||null===p){throw Error("Failed to open window")}}catch(l){f.location.href=k}}}else{o.msSaveOrOpenBlob(k,e)}};return{dataURLtoBlob:i,downloadURL:g}});c(b,"Extensions/OfflineExporting/OfflineExportingDefaults.js",[],function(){return{libURL:"https://code.highcharts.com/10.2.1/lib/",menuItemDefinitions:{downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChartLocal({type:"application/pdf"})}}}}});c(b,"Extensions/OfflineExporting/OfflineExporting.js",[b["Core/Renderer/HTML/AST.js"],b["Core/Chart/Chart.js"],b["Core/DefaultOptions.js"],b["Extensions/DownloadURL.js"],b["Extensions/Exporting/Exporting.js"],b["Core/Globals.js"],b["Core/HttpUtilities.js"],b["Extensions/OfflineExporting/OfflineExportingDefaults.js"],b["Core/Utilities.js"]],function(Q,O,P,p,t,w,s,o,N){var z=P.defaultOptions,E=p.downloadURL,M=w.win,D=w.doc,l=s.ajax,i=N.addEvent,y=N.error,g=N.extend,d=N.fireEvent,v=N.merge;Q.allowedAttributes.push("data-z-index","fill-opacity","rx","ry","stroke-dasharray","stroke-linejoin","text-anchor","transform","version","viewBox","visibility","xmlns","xmlns:xlink");Q.allowedTags.push("desc","clippath","g");var r=[],j;(function(h){function n(e,u){var B=this,x=v(B.options.exporting,e),f=function(C){!1===x.fallbackToExportServer?x.error?x.error(x,C):y(28,!0):B.exportChart(x)};e=function(){return[].some.call(B.container.getElementsByTagName("image"),function(C){C=C.getAttribute("href");return""!==C&&"string"===typeof C&&0!==C.indexOf("data:")})};w.isMS&&B.styledMode&&!t.inlineWhitelist.length&&t.inlineWhitelist.push(/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/);w.isMS&&("application/pdf"===x.type||B.container.getElementsByTagName("image").length&&"image/svg+xml"!==x.type)||"application/pdf"===x.type&&e()?f(Error("Image type not supported for this chart/browser.")):B.getSVGForLocalExport(x,u||{},f,function(C){-1<C.indexOf("<foreignObject")&&"image/svg+xml"!==x.type&&(w.isMS||"application/pdf"===x.type)?f(Error("Image type not supported for charts with embedded HTML")):h.downloadSVGLocal(C,g({filename:B.getFilename()},x),f,function(){return d(B,"exportChartLocalSuccess")})})}function q(e,f){var x=D.getElementsByTagName("head")[0],u=D.createElement("script");u.type="text/javascript";u.src=e;u.onload=f;u.onerror=function(){y("Error loading script "+e)};x.appendChild(u)}function k(S,H,u,K){var L=this,J=function(){x&&F===B&&K(L.sanitizeSVG(G.innerHTML,C))},I=function(e,V,f){++F;f.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",e);J()},G,C,R=null,x,B=0,F=0;L.unbindGetSVG=i(L,"getSVG",function(e){C=e.chartCopy.options;x=(G=e.chartCopy.container.cloneNode(!0))&&G.getElementsByTagName("image")||[];B=x.length});L.getSVGForExport(S,H);try{if(!x||!x.length){K(L.sanitizeSVG(G.innerHTML,C));return}for(H=0;H<x.length;H++){var T=x[H];(R=T.getAttributeNS("http://www.w3.org/1999/xlink","href"))?h.imageToDataUrl(R,"image/png",{imageElement:T},S.scale,I,u,u,u):(F++,T.parentNode.removeChild(T),H--,J())}}catch(U){u(U)}L.unbindGetSVG()}function a(R,G,I,K,H,F,B,J,C){var L=new M.Image,x=function(){setTimeout(function(){var e=D.createElement("canvas"),T=e.getContext&&e.getContext("2d");try{if(T){e.height=L.height*K;e.width=L.width*K;T.drawImage(L,0,0,e.width,e.height);try{var f=e.toDataURL(G);H(f,G,I,K)}catch(U){S(R,G,I,K)}}else{B(R,G,I,K)}}finally{C&&C(R,G,I,K)}},h.loadEventDeferDelay)},u=function(){J(R,G,I,K);C&&C(R,G,I,K)};var S=function(){L=new M.Image;S=F;L.crossOrigin="Anonymous";L.onload=x;L.onerror=u;L.src=R};L.onload=x;L.onerror=u;L.src=R}function m(e){var u=M.navigator.userAgent;u=-1<u.indexOf("WebKit")&&0>u.indexOf("Chrome");try{if(!u&&-1===e.indexOf("<foreignObject")){return h.domurl.createObjectURL(new M.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}}catch(f){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)}function A(J,I,G){var H=Number(J.getAttribute("width"))+2*I;I=Number(J.getAttribute("height"))+2*I;var C=new M.jspdf.jsPDF(I>H?"p":"l","pt",[H,I]);[].forEach.call(J.querySelectorAll('*[visibility="hidden"]'),function(e){e.parentNode.removeChild(e)});for(var F=J.querySelectorAll("linearGradient"),B=0;B<F.length;B++){for(var u=F[B].querySelectorAll("stop"),x=0;x<u.length&&"0"===u[x].getAttribute("offset")&&"0"===u[x+1].getAttribute("offset");){u[x].remove(),x++}}[].forEach.call(J.querySelectorAll("tspan"),function(e){"\u200b"===e.textContent&&(e.textContent=" ",e.setAttribute("dx",-5))});C.svg(J,{x:0,y:0,width:H,height:I,removeInvalid:!0}).then(function(){return G(C.output("datauristring"))})}h.CanVGRenderer={};h.domurl=M.URL||M.webkitURL||M;h.loadEventDeferDelay=w.isMS?150:0;h.compose=function(f){if(-1===r.indexOf(f)){r.push(f);var e=f.prototype;e.getSVGForLocalExport=k;e.exportChartLocal=n;v(!0,z.exporting,o)}return f};h.downloadSVGLocal=function(T,L,R,S){var Y=D.createElement("div"),G=L.type||"image/png",x=(L.filename||"chart")+"."+("image/svg+xml"===G?"svg":G.split("/")[1]),X=L.scale||1,K=L.libURL||z.exporting.libURL,U=!0,I=L.pdfFont;K="/"!==K.slice(-1)?K+"/":K;var F=function(B,u){var ab=function(ac,f){M.jspdf.jsPDF.API.events.push(["initialized",function(){this.addFileToVFS(ac,f);this.addFont(ac,"HighchartsFont",ac);this.getFontList().HighchartsFont||this.setFont("HighchartsFont")}])};I&&!/[^\u0000-\u007F\u200B]+/.test(B.textContent||"")&&(I=void 0);var aa=["normal","italic","bold","bolditalic"],C,Z=function(){var f=aa.shift();if(!f){return u()}var ac=I&&I[f];ac?l({url:ac,responseType:"blob",success:function(ad,ae){ad=new FileReader;ad.onloadend=function(){if("string"===typeof this.result){var af=this.result.split(",")[1];ab(f,af);"normal"===f&&(C=af)}Z()};ad.readAsDataURL(ae.response)},error:Z}):(C&&ab(f,C),Z())};Z()},J=function(){Q.setElementHTML(Y,T);var f=Y.getElementsByTagName("text"),B;[].forEach.call(f,function(C){["font-family","font-size"].forEach(function(Z){for(var aa=C;aa&&aa!==Y;){if(aa.style[Z]){C.style[Z]=aa.style[Z];break}aa=aa.parentNode}});C.style.fontFamily=I&&I.normal?"HighchartsFont":String(C.style.fontFamily&&C.style.fontFamily.split(" ").splice(-1));B=C.getElementsByTagName("title");[].forEach.call(B,function(Z){C.removeChild(Z)})});var u=Y.querySelector("svg");u&&F(u,function(){A(u,0,function(C){try{E(C,x),S&&S()}catch(Z){R(Z)}})})};if("image/svg+xml"===G){try{if("undefined"!==typeof M.navigator.msSaveOrOpenBlob){var V=new MSBlobBuilder;V.append(T);var W=V.getBlob("image/svg+xml")}else{W=m(T)}E(W,x);S&&S()}catch(e){R(e)}}else{if("application/pdf"===G){M.jspdf&&M.jspdf.jsPDF?J():(U=!0,q(K+"jspdf.js",function(){q(K+"svg2pdf.js",J)}))}else{W=m(T);var H=function(){try{h.domurl.revokeObjectURL(W)}catch(f){}};a(W,G,{},X,function(f){try{E(f,x),S&&S()}catch(u){R(u)}},function(){var u=D.createElement("canvas"),f=u.getContext("2d"),B=T.match(/^<svg[^>]*width\s*=\s*"?(\d+)"?[^>]*>/)[1]*X,C=T.match(/^<svg[^>]*height\s*=\s*"?(\d+)"?[^>]*>/)[1]*X,Z=function(){M.canvg.Canvg.fromString(f,T).start();try{E(M.navigator.msSaveOrOpenBlob?u.msToBlob():u.toDataURL(G),x),S&&S()}catch(aa){R(aa)}finally{H()}};u.width=B;u.height=C;M.canvg?Z():(U=!0,q(K+"canvg.js",function(){Z()}))},R,R,function(){U&&H()})}}};h.getScript=q;h.imageToDataUrl=a;h.svgToDataUrl=m;h.svgToPdf=A})(j||(j={}));return j});c(b,"masters/modules/offline-exporting.src.js",[b["Core/Globals.js"],b["Extensions/OfflineExporting/OfflineExporting.js"]],function(d,f){d.downloadSVGLocal=f.downloadSVGLocal;f.compose(d.Chart)})});