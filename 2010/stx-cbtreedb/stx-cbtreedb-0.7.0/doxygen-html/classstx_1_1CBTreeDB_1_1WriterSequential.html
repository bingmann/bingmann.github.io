<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>stx-cbtreedb: stx::CBTreeDB&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacestx.html">stx</a>::<a class="el" href="classstx_1_1CBTreeDB.html">CBTreeDB</a>::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html">WriterSequential</a>
  </div>
</div>
<div class="contents">
<h1>stx::CBTreeDB&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential Class Reference</h1><!-- doxytag: class="stx::CBTreeDB::WriterSequential" -->
<p><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html" title="WriterSequential is used to construct a constant B-tree database from an _ordered_...">WriterSequential</a> is used to construct a constant B-tree database from an _ordered_ input sequence.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for stx::CBTreeDB&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential:</div>
<div class="dynsection">
<div class="center"><img src="classstx_1_1CBTreeDB_1_1WriterSequential__coll__graph.png" border="0" usemap="#stx_1_1CBTreeDB_3_01__Key_00_01__Compare_00_01__BTreePageSize_00_01__AppVersionId_01_4_1_1WriterSequential_coll__map" alt="Collaboration graph"/></div>
<map name="stx_1_1CBTreeDB_3_01__Key_00_01__Compare_00_01__BTreePageSize_00_01__AppVersionId_01_4_1_1WriterSequential_coll__map" id="stx_1_1CBTreeDB_3_01__Key_00_01__Compare_00_01__BTreePageSize_00_01__AppVersionId_01_4_1_1WriterSequential_coll__map">
<area shape="rect" id="node2" href="structstx_1_1CBTreeDB_1_1SignaturePage.html" title="Signature page which heads all cbtreedb files." alt="" coords="5,5,557,35"/><area shape="rect" id="node4" href="classstx_1_1CBTreeDB_1_1SHA256.html" title="SHA&#45;256 Message Digest implementation class." alt="" coords="27,59,536,88"/><area shape="rect" id="node6" title="STL class." alt="" coords="229,112,333,141"/><area shape="rect" id="node8" href="classstx_1_1CBTreeDB_1_1BTreeBuilder.html" title="BTreeBuilder is used to construct an index very similar to a B&#45;tree from an ordered..." alt="" coords="12,165,551,195"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classstx_1_1CBTreeDB_1_1WriterSequential-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a7d0a66e742ec030bd1e925bf9c468721">WriterSequential</a> (const <a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a> &amp;key_less=<a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a>())</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a7d0a66e742ec030bd1e925bf9c468721"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a14a27311aad5fcb1cc9d4fb9351a4093">Add</a> (const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;key, uint32_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a new key -&gt; value size mapping to the database.  <a href="#a14a27311aad5fcb1cc9d4fb9351a4093"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a2dafe7529ba02d3f45fe27a7a543463c">Size</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return number of pairs inserted into mapping.  <a href="#a2dafe7529ba02d3f45fe27a7a543463c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#aa007cbc0d3d5577db53a69032c3a1be9">SetSignature</a> (const char *newsignature)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the database signature from 'cbtreedb' to a custom string.  <a href="#aa007cbc0d3d5577db53a69032c3a1be9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1d910774d254e00b8230e33347d8dfec">WriteHeader</a> (std::ostream &amp;os)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write header and b-tree to file stream. Starts Phase 2.  <a href="#a1d910774d254e00b8230e33347d8dfec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1752833c7e6276010cb9c9a310734882">WriteValue</a> (const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;key, const void *data, uint32_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sequentially write value blobs to file.  <a href="#a1752833c7e6276010cb9c9a310734882"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a751ddde018c1ddf297418897b29574c7">WriteValue</a> (const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;key, const std::string &amp;data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sequentially write value blobs to file.  <a href="#a751ddde018c1ddf297418897b29574c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a2ee0b0fef29c9d1b0f147ab09731d3e0">WriteFinalize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalize database file.  <a href="#a2ee0b0fef29c9d1b0f147ab09731d3e0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a0ca8bd694df7758aba25b8e02446c06b">m_key_less</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">key comparison functional  <a href="#a0ca8bd694df7758aba25b8e02446c06b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstx_1_1CBTreeDB_1_1BTreeBuilder.html">BTreeBuilder</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#aa6134fc3fec0e844936059cdce69cb7a">m_btree</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 1: b-tree object built from sequential predeclared sequence  <a href="#aa6134fc3fec0e844936059cdce69cb7a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a51b55a42f26f0e9956f809f43ffc0a45">m_dataoffset</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 1: value data offset counter for predeclared sequence  <a href="#a51b55a42f26f0e9956f809f43ffc0a45"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#ab61f4940d4987414b5a93f9887150834">m_signaturestr</a> [8]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">signature characters to begin file with  <a href="#ab61f4940d4987414b5a93f9887150834"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structstx_1_1CBTreeDB_1_1SignaturePage.html">SignaturePage</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#adeb03bd49fd5ca9a8d6189206451be5f">m_signature</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">signature page of current written file  <a href="#adeb03bd49fd5ca9a8d6189206451be5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1e3eb04ed4649ee24e3970edd7e97924">m_ostream</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 2: output stream  <a href="#a1e3eb04ed4649ee24e3970edd7e97924"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#abb9ad789240ab9f873edad155df33ea4">m_currpos</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 2: current position in array  <a href="#abb9ad789240ab9f873edad155df33ea4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#abed97e673243f728d0d9a95ed8a66dd5">m_curroffset</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 2: current offset in output stream  <a href="#abed97e673243f728d0d9a95ed8a66dd5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstx_1_1CBTreeDB_1_1SHA256.html">SHA256</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#ab8e188fcae4e6b127b3f3593eb7e477e">m_datasha</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">phase 2: running digest of the value area  <a href="#ab8e188fcae4e6b127b3f3593eb7e477e"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename _Key = uint32_t, typename _Compare = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt;<br/>
 class stx::CBTreeDB&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential</h3>

<p><a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html" title="WriterSequential is used to construct a constant B-tree database from an _ordered_...">WriterSequential</a> is used to construct a constant B-tree database from an _ordered_ input sequence. </p>
<p>The writer class is fed in two phases. In phase one the ordered sequence of keys together with their value data size (without contents) is delivered to the class via the <a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a14a27311aad5fcb1cc9d4fb9351a4093" title="Add a new key -&gt; value size mapping to the database.">Add()</a> function. Phase two is started by calling <a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1d910774d254e00b8230e33347d8dfec" title="Write header and b-tree to file stream. Starts Phase 2.">WriteHeader()</a> followed by a sequence to <a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1752833c7e6276010cb9c9a310734882" title="Sequentially write value blobs to file.">WriteValue()</a> calls for each of the predeclared key-value pairs. The value data is written directly to the file and not buffered. The write loop is terminated by <a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a2ee0b0fef29c9d1b0f147ab09731d3e0" title="Finalize database file.">WriteFinalize()</a>, which finalizes the database file. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02775">2775</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7d0a66e742ec030bd1e925bf9c468721"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::WriterSequential" ref="a7d0a66e742ec030bd1e925bf9c468721" args="(const key_compare &amp;key_less=key_compare())" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::WriterSequential </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key_less</em> = <code><a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a>()</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02807">2807</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a14a27311aad5fcb1cc9d4fb9351a4093"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::Add" ref="a14a27311aad5fcb1cc9d4fb9351a4093" args="(const key_type &amp;key, uint32_t size)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::Add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a new key -&gt; value size mapping to the database. </p>
<p>The keys must be added in ascending order. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02819">2819</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa007cbc0d3d5577db53a69032c3a1be9"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::SetSignature" ref="aa007cbc0d3d5577db53a69032c3a1be9" args="(const char *newsignature)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::SetSignature </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>newsignature</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the database signature from 'cbtreedb' to a custom string. </p>
<p>The signature is always 8 bytes long. Longer strings are truncated, shorter ones padded with nulls. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02841">2841</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2dafe7529ba02d3f45fe27a7a543463c"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::Size" ref="a2dafe7529ba02d3f45fe27a7a543463c" args="() const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::Size </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return number of pairs inserted into mapping. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02831">2831</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2ee0b0fef29c9d1b0f147ab09731d3e0"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::WriteFinalize" ref="a2ee0b0fef29c9d1b0f147ab09731d3e0" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::WriteFinalize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalize database file. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02935">2935</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d910774d254e00b8230e33347d8dfec"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::WriteHeader" ref="a1d910774d254e00b8230e33347d8dfec" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::WriteHeader </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write header and b-tree to file stream. Starts Phase 2. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02852">2852</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a751ddde018c1ddf297418897b29574c7"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::WriteValue" ref="a751ddde018c1ddf297418897b29574c7" args="(const key_type &amp;key, const std::string &amp;data)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::WriteValue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sequentially write value blobs to file. </p>
<p>The key-value sequence must match the pre-declared sequence. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02929">2929</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1752833c7e6276010cb9c9a310734882"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::WriteValue" ref="a1752833c7e6276010cb9c9a310734882" args="(const key_type &amp;key, const void *data, uint32_t size)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::WriterSequential::WriteValue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstx_1_1CBTreeDB.html#a3853858e7d8cc630c832232bc46ed2c0">key_type</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sequentially write value blobs to file. </p>
<p>The key-value sequence must match the pre-declared sequence. </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02896">2896</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa6134fc3fec0e844936059cdce69cb7a"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_btree" ref="aa6134fc3fec0e844936059cdce69cb7a" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstx_1_1CBTreeDB_1_1BTreeBuilder.html">BTreeBuilder</a> <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#aa6134fc3fec0e844936059cdce69cb7a">WriterSequential::m_btree</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 1: b-tree object built from sequential predeclared sequence </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02782">2782</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="abed97e673243f728d0d9a95ed8a66dd5"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_curroffset" ref="abed97e673243f728d0d9a95ed8a66dd5" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#abed97e673243f728d0d9a95ed8a66dd5">WriterSequential::m_curroffset</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 2: current offset in output stream </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02800">2800</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb9ad789240ab9f873edad155df33ea4"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_currpos" ref="abb9ad789240ab9f873edad155df33ea4" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#abb9ad789240ab9f873edad155df33ea4">WriterSequential::m_currpos</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 2: current position in array </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02797">2797</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a51b55a42f26f0e9956f809f43ffc0a45"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_dataoffset" ref="a51b55a42f26f0e9956f809f43ffc0a45" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a51b55a42f26f0e9956f809f43ffc0a45">WriterSequential::m_dataoffset</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 1: value data offset counter for predeclared sequence </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02785">2785</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab8e188fcae4e6b127b3f3593eb7e477e"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_datasha" ref="ab8e188fcae4e6b127b3f3593eb7e477e" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstx_1_1CBTreeDB_1_1SHA256.html">SHA256</a> <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#ab8e188fcae4e6b127b3f3593eb7e477e">WriterSequential::m_datasha</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 2: running digest of the value area </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02803">2803</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ca8bd694df7758aba25b8e02446c06b"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_key_less" ref="a0ca8bd694df7758aba25b8e02446c06b" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstx_1_1CBTreeDB.html#aa8d64c69bfec9eb6728d50ce1668d522">key_compare</a> <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a0ca8bd694df7758aba25b8e02446c06b">WriterSequential::m_key_less</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>key comparison functional </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02779">2779</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e3eb04ed4649ee24e3970edd7e97924"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_ostream" ref="a1e3eb04ed4649ee24e3970edd7e97924" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::ostream* <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#a1e3eb04ed4649ee24e3970edd7e97924">WriterSequential::m_ostream</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>phase 2: output stream </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02794">2794</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="adeb03bd49fd5ca9a8d6189206451be5f"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_signature" ref="adeb03bd49fd5ca9a8d6189206451be5f" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structstx_1_1CBTreeDB_1_1SignaturePage.html">SignaturePage</a> <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#adeb03bd49fd5ca9a8d6189206451be5f">WriterSequential::m_signature</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>signature page of current written file </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02791">2791</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab61f4940d4987414b5a93f9887150834"></a><!-- doxytag: member="stx::CBTreeDB::WriterSequential::m_signaturestr" ref="ab61f4940d4987414b5a93f9887150834" args="[8]" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename _Key  = uint32_t, typename _Compare  = std::less&lt;_Key&gt;, unsigned int _BTreePageSize = 1024, uint32_t _AppVersionId = 0&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="classstx_1_1CBTreeDB.html">stx::CBTreeDB</a>&lt; _Key, _Compare, _BTreePageSize, _AppVersionId &gt;::<a class="el" href="classstx_1_1CBTreeDB_1_1WriterSequential.html#ab61f4940d4987414b5a93f9887150834">WriterSequential::m_signaturestr</a>[8]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>signature characters to begin file with </p>

<p>Definition at line <a class="el" href="stx-cbtreedb_8h_source.html#l02788">2788</a> of file <a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="stx-cbtreedb_8h_source.html">stx-cbtreedb.h</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Apr 14 13:43:42 2010 for stx-cbtreedb by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
