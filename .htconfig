# panthema Web Page Configuration

DirectoryIndex		index.html index.php

# Longer Keep Alive Timeout
KeepAliveTimeout 	60

<Location "/">
    Options		-Indexes
</Location>
<Location "/repo/">
    Options		+Indexes
</Location>

# ErrorDocuments

ErrorDocument		401	/401.html
ErrorDocument		403	/403.html
ErrorDocument		404	/404.html
ErrorDocument		500	/500.html

# Redirect some alias domains

RewriteEngine 	On

RewriteCond	%{HTTP_HOST} 	panthema\.(com|de)$ [NC]
RewriteRule	^(.*)$		http://panthema.net$1 [R=301,L]

RewriteCond	%{HTTP_HOST} 	^www\.panthema\.net$ [NC]
RewriteRule	^(.*)$		http://panthema.net$1 [R=301,L]

RewriteCond	%{HTTP_HOST} 	(metaset|starftp|taekwondowiki|taekwondo-wiki)\.(com|net|de)$ [NC]
RewriteRule	^(.*)$		http://panthema.net$1 [R=301,L]

RewriteCond     %{SERVER_PORT}  !^443$
RewriteRule     ^/(oc-42.*)$    https://%{HTTP_HOST}/$1 [NC,R=301,L]

# Subprograms

RewriteRule     ^/wik-331(.*)$  /srv/www/panthema.net.piwik$1 [L]
RewriteRule     ^/oc-42(.*)$    /srv/www/panthema.net.owncloud$1 [L]
RewriteRule     ^/cgit(.*)$     /srv/www/panthema.net.cgit$1 [L]
ProxyPass       /cdash-12       http://localhost:32012/

<IfDefine !DEKA>

RewriteCond	%{HTTPS}	!=on
RewriteRule	^/unitkd/forum(.*)	https://%{SERVER_NAME}/unitkd/forum$1 [R=301,L]

RewriteCond	%{HTTPS}	!=on
RewriteRule	^/unitkd/wiki(.*)	https://%{SERVER_NAME}/unitkd/wiki$1 [R=301,L]

RewriteRule	^/unitkd[/]?$		http://www.rz.uni-karlsruhe.de/~el51/ [R=302,L]

RewriteRule	^/unitkd/wiki$          /srv/www/idlebox.net/unitkd/wik/phase3/index.php [L,QSA]
RewriteRule	^/unitkd/wiki/(.*)$     /srv/www/idlebox.net/unitkd/wik/phase3/index.php?title=$1 [L,QSA]
RewriteRule	^/unitkd/wik(.*)$       /srv/www/idlebox.net/unitkd/wik$1 [L,QSA]

RewriteRule	^/unitkd/forum(.*)$     /srv/www/idlebox.net/unitkd/forum$1 [L,QSA]

</IfDefine>

# Expiration Control

ExpiresActive 		On
ExpiresDefault				"access plus 1 hour"
ExpiresByType 		image/gif 	"access plus 1 day"
ExpiresByType 		image/jpeg 	"access plus 1 day"
ExpiresByType 		image/png 	"access plus 1 day"
ExpiresByType 		text/html 	"access plus 1 hour"
ExpiresByType 		text/css 	"access plus 1 hour"

<Location /cdash-12/>
  ExpiresActive     Off
</Location>

# git-web configuration

<Location /cgit/cgit.cgi>
      Options -Indexes +FollowSymlinks +ExecCGI

      AuthType	      Basic
      AuthName	      "cgit Interface"
      AuthUserFile    /var/lib/gitolite/htpasswd
      Require	      valid-user
</Location>

# Subversion Repositories

<Location /repo/svn>
	DAV svn
	SVNPath /srv/svn/repo/

	AuthType Basic
	AuthName "panthema.net Repository Subversion"
	AuthUserFile /srv/svn/htpasswd

	<LimitExcept GET PROPFIND OPTIONS REPORT>
		Require valid-user
	</LimitExcept>
</Location>

<Location /repo/gentoo>
	DAV svn
	SVNPath /srv/svn/repo-gentoo/

	AuthType Basic
	AuthName "panthema.net Gentoo Subversion Repository"
	AuthUserFile /srv/svn/htpasswd

	<LimitExcept GET PROPFIND OPTIONS REPORT>
		Require valid-user
	</LimitExcept>
</Location>
