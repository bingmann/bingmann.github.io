<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=iso-8859-1" http-equiv="content-type" /><meta name="viewport" content="initial-scale=1"><title>Blog Entries Tagged with 'frontpage' - panthema.net</title><link rel="stylesheet" type="text/css" href="/css/base.css" /><link rel="stylesheet" type="text/css" href="/css/fonts.css" /><link rel="alternate" type="application/rss+xml" title="panthema.net Weblog Feed RSS 2.0" href="http://panthema.net/xmlfeed/weblog-rss20.xml" /><link rel="alternate" type="application/atom+xml" title="panthema.net Weblog Feed Atom 1.0" href="http://panthema.net/xmlfeed/weblog-atom10.xml" /><script type="text/javascript" src="/js/base.js"></script><script type="text/javascript">/* <!-- */makeIEHover = function() {var lis = document.getElementById('ptnav').getElementsByTagName('li');for (var i = 0; i < lis.length; i++) {lis[i].onmouseover = function() {this.className += ' sfhover';};lis[i].onmouseout = function() {this.className = this.className.replace(new RegExp(' sfhover\b'), '');};}};if (window.attachEvent) window.attachEvent('onload', makeIEHover);/* --> */</script></head><body style="background-image: url(/img/bgfractal7.jpg)"><div class="pttopbar"><div style="float: right"><ul id="ptnav"><li class="top"><a class="ni" href="/"><i class="icon-book"></i> Weblog</a><ul style="margin-left: -6px; margin-top: 4px" class="nx"><li><a href="/2018/">2018</a></li><li><a href="/2017/">2017</a></li><li><a href="/2016/">2016</a></li><li><a href="/2015/">2015</a></li><li><a href="/2014/">2014</a></li><li><a href="/2013/">2013</a></li><li><a href="/2012/">2012</a></li><li><a href="/2011/">2011</a></li><li><a href="/2010/">2010</a></li><li><a href="/2009/">2009</a></li><li><a href="/2008/">2008</a></li><li><a href="/2007/">2007</a></li><li><a href="/2006/">2006</a></li><li class="nt"><a href="/2005/">2005</a></li><li class="ns"><a href="/xmlfeed/weblog-rss20.xml">RSS Feed</a></li><li class="nt"><a href="/xmlfeed/weblog-atom10.xml">XML Atom</a></li><li class="ns"><a href="/search.html">Search</a></li></ul></li><li class="top"><a class="ni" href="/tags/"><i class="icon-tags"></i> Tags</a><div style="width: 14em; margin-left: -9em; margin-top: 4px"><a style="font-size: 10pt" href="/tags/algebra.html">algebra</a> <a style="font-size: 16pt" href="/tags/c++.html">c++</a> <a style="font-size: 12pt" href="/tags/code-example.html">code-example</a> <a style="font-size: 14pt" href="/tags/code-snippet.html">code-snippet</a> <a style="font-size: 11pt" href="/tags/coding_tricks.html">coding tricks</a> <a style="font-size: 10pt" href="/tags/compsci.html">compsci</a> <a style="font-size: 10pt" href="/tags/compsci_study_thesis.html">compsci study thesis</a> <a style="font-size: 9pt" href="/tags/crypto-speedtest.html">crypto-speedtest</a> <a style="font-size: 10pt" href="/tags/cryptography.html">cryptography</a> <a style="font-size: 9pt" href="/tags/cryptote.html">cryptote</a> <a style="font-size: 9pt" href="/tags/dissertation.html">dissertation</a> <a style="font-size: 12pt" href="/tags/flex-bison-cpp-example.html">flex-bison-cpp-example</a> <a style="font-size: 16pt" href="/tags/frontpage.html">frontpage</a> <a style="font-size: 14pt" href="/tags/fun.html">fun</a> <a style="font-size: 10pt" href="/tags/graphviz.html">graphviz</a> <a style="font-size: 9pt" href="http://www.hmtg.de">hartmetall</a> <a style="font-size: 9pt" href="/tags/helppc.html">helppc</a> <a style="font-size: 9pt" href="/tags/hifi_selbstbau.html">hifi selbstbau</a> <a style="font-size: 10pt" href="/tags/latex.html">latex</a> <a style="font-size: 10pt" href="/tags/librivox.html">librivox</a> <a style="font-size: 10pt" href="/tags/linux.html">linux</a> <a style="font-size: 9pt" href="/tags/massive-sorting.html">massive-sorting</a> <a style="font-size: 11pt" href="/tags/maths.html">maths</a> <a style="font-size: 9pt" href="/tags/music.html">music</a> <a style="font-size: 10pt" href="/tags/netfundamentals.html">netfundamentals</a> <a style="font-size: 11pt" href="/tags/ns-3.html">ns-3</a> <a style="font-size: 10pt" href="/tags/parallel-string-sorting.html">parallel-string-sorting</a> <a style="font-size: 9pt" href="/tags/qtsqlview.html">qtsqlview</a> <a style="font-size: 14pt" href="/tags/research.html">research</a> <a style="font-size: 11pt" href="/tags/sdios06.html">sdios06</a> <a style="font-size: 9pt" href="/tags/sdlfractal.html">sdlfractal</a> <a style="font-size: 14pt" href="/tags/sorting.html">sorting</a> <a style="font-size: 11pt" href="/tags/sound_of_sorting.html">sound of sorting</a> <a style="font-size: 10pt" href="/tags/stringology.html">stringology</a> <a style="font-size: 16pt" href="/tags/stx-btree.html">stx-btree</a> <a style="font-size: 9pt" href="/tags/stx-exparser.html">stx-exparser</a> <a style="font-size: 15pt" href="/tags/stxxl.html">stxxl</a> <a style="font-size: 16pt" href="/tags/talk.html">talk</a> <a style="font-size: 13pt" href="/tags/thrill.html">thrill</a> <a style="font-size: 10pt" href="/tags/tutorium.html">tutorium</a> <a style="font-size: 16pt" href="/tags/university.html">university</a> <a style="font-size: 13pt" href="/tags/utilities.html">utilities</a> <a style="font-size: 10pt" href="/tags/vncrec.html">vncrec</a> <a style="font-size: 9pt" href="/tags/webdesign.html">webdesign</a> </div></li><li class="top"> <a class="ni" href="#"><i class="icon-cubes"></i> Projects</a> <ul style="margin-left: -8em; margin-top: 4px;" class="nx"> <li><a href="/2009/cryptote/">CryptoTE</a></li> <li><a href="/2009/digup/">digup</a></li> <li><a href="/2013/disk-filltest/">disk-filltest</a></li> <li><a href="/2012/1119-eSAIS-Inducing-Suffix-and-LCP-Arrays-in-External-Memory/">eSAIS-LCP</a></li> <li><a href="/2007/flex-bison-cpp-example/">Flex Bison C++ Example</a></li> <li><a href="/2013/malloc_count/">malloc_count</a></li> <li><a href="/2013/parallel-string-sorting/">parallel-string-sorting</a></li> <li><a href="/2013/pmbw/">Parallel Memory Bandwidth</a></li> <li><a href="/2014/sqlplot-tools/">SqlPlotTools</a></li> <li><a href="/2013/sound-of-sorting/">The Sound of Sorting</a></li> <li><a href="/2007/stx-btree/">STX B+ Tree</a></li> <li><a href="/2010/stx-cbtreedb/">STX Constant BTreeDB</a></li> <li><a href="/2010/stx-execpipe/">STX ExecPipe</a></li> <li><a href="/2007/stx-exparser/">STX Expression Parser</a></li> <li><a href="/tags/stxxl.html">STXXL 1.4</a></li> <li class="nt"><a href="/2014/vncrec-rgb/">VNCrec RGB 0.4</a></li> <li class="ns"><a href="/search.html">Search</a></li> </ul></li><li class="top"> <a class="ni" href="#"><i class="icon-graduation-cap"></i> Research</a> <ul style="margin-left: -16em; margin-top: 4px" class="nx"> <li><a href="/2012/1119-eSAIS-Inducing-Suffix-and-LCP-Arrays-in-External-Memory/">eSAIS-LCP - External Memory Suffix Sorting</a></li> <li><a href="/2016/0114-diploma-thesis/">On Bispanning Graphs</a></li> <li><a href="/2013/parallel-string-sorting/">Parallel String Sorting</a></li> <li><a href="/tags/massive-sorting.html">Practical Massively Parallel Sorting</a></li> <li><a href="/tags/stxxl.html">STXXL - External Memory Algorithms</a></li> <li><a href="/tags/thrill.html">Thrill - Distributed Batch Big Data Processing</a></li> <li class="ns"><a href="/search.html">Search</a></li> </ul></li><li class="top"> <a class="ni" href="/about/"><i class="icon-info-circled"></i> About</a> <ul style="margin-left: -6em; margin-top: 4px" class="nx"> <li><a href="/about/">Timo Bingmann</a></li> <li><a href="/about/impressum.html">Impressum</a></li> </ul></li><li class="top"> <a class="ni" href="/subscribe.html"><i class="icon-rss-squared"></i> Subscribe</a></li></ul></div><div style="padding: 6px"><a href="/">panthema</a>  / <a href="/tags/">tags</a> / <a href="/tags/frontpage.html">frontpage</a></div></div><div class="ptcontent"><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2014/1026-1.000.000-Views-of-Sound-of-Sorting-YouTube-Video/"><img src="/2014/1026-1.000.000-Views-of-Sound-of-Sorting-YouTube-Video/thumb.png" width="300" height="137" alt="Screenshot of YouTube View Counter of the &quot;15 Sorting Algorithms in 6 Minutes&quot;" title="Screenshot of YouTube View Counter of the &quot;15 Sorting Algorithms in 6 Minutes&quot;" /></a></div><h1>1.000.000 Views of Sound of Sorting YouTube Video</h1><p class="info">Posted on 2014-10-26 17:30 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2014/1026-1.000.000-Views-of-Sound-of-Sorting-YouTube-Video/">Permlink</a> with <a href="/2014/1026-1.000.000-Views-of-Sound-of-Sorting-YouTube-Video/#notes">1 Comments</a>. Tags: <a href="/tags/sorting.html">sorting</a> <a href="/tags/sound_of_sorting.html">sound of sorting</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>Some time last week my YouTube video &quot;<a href="http://www.youtube.com/watch?v=kPRA0W1kECg">15 Sorting Algorithms in 6 Minutes</a>&quot; reached <b>1 million views</b>. The original video was uploaded on 2013-05-20 which is just <b>524 days ago</b>, so on average about <b>every 45.2 seconds</b> someone started to watch the video (which itself is about 6 minutes long). The world is a really big place. Most of the views, however, occured in spikes of interest, as seen in the graph below.</p><p>The original video contained only 15 algorithms. The program &quot;<a href="/2013/sound-of-sorting">Sound of Sorting</a>&quot; itself, which was used to create the animations, now contains <b>30 algorithms</b> or variants. For some of the additional algorithms I also created videos on YouTube, which are also worthwhile watching.</p><p>There are two parallel algorithms based on sorting networks, where each left-to-right sweep is one parallel sorting step:</p><ul><li><a href="http://www.youtube.com/watch?v=DNbd1EFQ_1o">Batcher&apos;s Odd-Event Mergesort</a> and <a href="http://www.youtube.com/watch?v=r-erNO-WICo">Batcher&apos;s Bitonic Sort</a></li></ul><p>An algorithm, which is optimal in terms of the number of writes to sort the array:</p><ul><li><a href="http://www.youtube.com/watch?v=ZSJGf5Ngw18">Cycle Sort</a></li></ul><p>An adaptive sorting algorithm which detects presorted areas, and is used in many modern programming language runtime libraries:</p><ul><li><a href="http://www.youtube.com/watch?v=NVIjHj-lrT4">Tim Sort</a></li></ul><p>An in-place stable mergesort with O(1) extra space:</p><ul><li><a href="http://www.youtube.com/watch?v=NjcSyD7p660">Block Merge Sort (WikiSort)</a></li></ul><p>And two algorithms, that have a high asymptotic worst-case complexity, and are thus more a joke, but still pretty to watch:</p><ul><li><a href="http://www.youtube.com/watch?v=QbRoyhGdjnA">Slow Sort</a> and <a href="http://www.youtube.com/watch?v=vIDkfrSdID8">Stooge Sort</a></li></ul><div style="text-align: center"><a href="/2014/1026-1.000.000-Views-of-Sound-of-Sorting-YouTube-Video/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/"><img src="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/thumb.jpg" width="300" height="225" alt="First slide of the talk showing the inside of a hard disk" title="First slide of the talk showing the inside of a hard disk" /></a></div><h1>Recording of a Talk "STXXL 1.4.0 and Beyond"</h1><p class="info">Posted on 2014-06-22 20:00 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/">Permlink</a> with <a href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/#notes">0 Comments</a>. Tags: <a href="/tags/c++.html">c++</a> <a href="/tags/stxxl.html">stxxl</a> <a href="/tags/talk.html">talk</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>This is a recording of a talk that I gave last week at the <a href="http://www.helmholtz-lsdma.de">3rd LSDMA Topical Meeting</a> in Berlin. The talk covers a basic introduction into the <a href="http://stxxl.sourceforge.net">STXXL library</a>&apos;s features and contains many short code examples that serve as a tutorial.</p><p>The slides of the presentation <a title="Download 2014-06-22 STXXL 1.4.0 and Beyond.pdf (1.22 MiB)" href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/2014-06-22%20STXXL%201.4.0%20and%20Beyond.pdf">2014-06-22 STXXL 1.4.0 and Beyond.pdf <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALCQAACwkBEvpHPgAAAAd0SU1FB9wMCgcxLPKvBkUAAAHtSURBVCjPhZLNSiNBEMd/1TOZfCwaPAUE8bYnA543xLyCN08efQJPPoBvYMAn8OLVo0dhIeBBEBEkhyjLZP0AQ4Jmeqa79pCd3njaPzTV3dSvqquqZTAY6OrqKgIgglfFO4dzjvl8ztHR0Y/Ly8ufIkLQ/f29Bp2eqs8yVVW11urt7a2maao7OzsdVQ2MKSOo9/D2hhwe4p2jUqlQr9cxxnB2dnbV6/UCaAI+ncLNDdrphCsRwXtPkiScn59f7e7udlSVOHisrKAbG+j7O3JygrbbNKtVRo0G1lpGoxHdbvdKRJoB0qcn5OIC2dtD7+4wDw+sNZt8Oz7m9+MjjUaD2WwG8H0BpSnS78PWFrq/D/U6/vmZXITP11eq1SpJklCr1QA0RgT6fWQ0wvf7mFZrkXl9HclzYmuZz2YkSUIcL3LEAHpwgHx8YFot0jRlOBzinKMoCqy1bG9vs6wYVdjcZDwe8+v6GuccxhhUFWMMURRRFAXLc4oBBFBVoigKzqU1xoTf8WVO3ntUFRFBRDDGBGuMwVq7qLOEnHNYa/HeB2gZFBHyPCfP83/fyHv/BVp2Ls9lQ8pMcdmlWq1GFEU450LkoigCsPy8+OXlhel0irWWLMvIsow8z1HVUGu5JpMJZeMqQPvv/r+KoujzD0w6NaOXWgCIAAAAAElFTkSuQmCC" alt="2014-06-22 STXXL 1.4.0 and Beyond.pdf" style="margin-bottom: -2px" width="13" height="17"/></a> are available online and <a href="https://www.youtube.com/watch?v=UswxcAOJKBE">the recorded talk</a> can be seen on Youtube video below.</p><div id="jS014_06_22_STXXL_1_4_0_and_Beyond_scroll_png" class="jThumbnailScroller" style="height:75px"><div class="jTscrollerContainer"><div class="jTscroller"><a title="Download 2014-06-22 STXXL 1.4.0 and Beyond.pdf" href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/2014-06-22%20STXXL%201.4.0%20and%20Beyond.pdf"><img src="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/2014-06-22%20STXXL%201.4.0%20and%20Beyond-scroll.png" alt="Download 2014-06-22 STXXL 1.4.0 and Beyond.pdf" title="Download 2014-06-22 STXXL 1.4.0 and Beyond.pdf" width="4200" height="75"/></a></div></div></div><script type="text/javascript" src="/js/jquery-1.8.2.js"></script><script type="text/javascript" src="/js/jquery-ui-1.8.13.custom.min.js"></script><script type="text/javascript" src="/js/jquery.thumbnailScroller.js"></script><script type="text/javascript">/* <![CDATA[ */ $(document).ready(function() { $("#jS014_06_22_STXXL_1_4_0_and_Beyond_scroll_png").thumbnailScroller(); }); /* ]]> */</script><p>And here is the video of the recording: <a href="http://www.youtube.com/watch?v=UswxcAOJKBE">http://www.youtube.com/watch?v=UswxcAOJKBE</a></p><div style="text-align: center"><a href="/2014/0622-Talk-STXXL-1.4.0-and-Beyond/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2013/1024-Sound-of-Sorting-KIT-Informatik/"><img src="/2013/1024-Sound-of-Sorting-KIT-Informatik/thumb.jpg" width="300" height="264" alt="Screenshot of KIT Informatik Webpage" title="Screenshot of KIT Informatik Webpage" /></a></div><h1>Sound of Sorting: Viral Video on KIT Informatik Webpage</h1><p class="info">Posted on 2013-10-24 22:45 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2013/1024-Sound-of-Sorting-KIT-Informatik/">Permlink</a> with <a href="/2013/1024-Sound-of-Sorting-KIT-Informatik/#notes">0 Comments</a>. Tags: <a href="/tags/fun.html">fun</a> <a href="/tags/sorting.html">sorting</a> <a href="/tags/sound_of_sorting.html">sound of sorting</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>Little did I expect what would happen <b>when coding</b> the <a href="/2013/sound-of-sorting/">Sound of Sorting</a> demo program. The initial motivation was to create a program that counts the number of comparisons of sorting algorithms, so that the students in our lecture <a href="http://algo2.iti.kit.edu/AlgorithmenI2013.php">&quot;Algorithms 1&quot;</a> could <b>compare the results of theoretical analysis and real implementations</b>. There were many programs similar to the one I finally made, but there was no program in which the sorting algorithms were easily readable, and not entwined with visualization code. I needed the third-year students to see &quot;simple&quot; code and at the same time have comparison counting and nice visualizations. And none of the existing programs <b>highlighted the internal workings</b> of the algorithms well.</p><p>These were the initial goals what became the <a href="/2013/sound-of-sorting/">Sound of Sorting</a>. The program itself took only about <b>seven days of coding work</b>, which was done from the 17th to 21st of May this year. The program had to be finished for the lecture on the 22nd, so there was a hard deadline to meet. The videos were created on the following weekends, and additional algorithms were added later.</p><p>Adding <b>sound effects</b> was very much an <b>afterthought</b>, because I had done some similar work previously with manipulating waveforms. Thus there was no learning curve to overcome to have comparisons play sounds. What kind of sound to play, however, needed a lot of artistic touch, trial and error, and the ability to map and transform frequency, oscillators and envelopes as needed. Forming, mixing and bending sound waves as done in the <a href="/2013/sound-of-sorting/">Sound of Sorting</a> requires a mathematical mindset and some appropriate background.</p><p>The by-product of this demo program for teaching sort algorithms was the YouTube video <a href="http://www.youtube.com/watch?v=kPRA0W1kECg">&quot;15 Sorting Algorithms in 6 Minutes&quot;</a> which, <b>to my great surprise, went viral</b> on social networks and was viewed 420.000 times to-date. I&apos;m glad that many people with otherwise no connections to algorithmics find this video interesting, and hope that those with further interest view the slower videos, which provide more insight into the algorithms.</p><p>Today, the video <b>infected the front page of my current employer</b>: the <a href="http://www.informatik.kit.edu/">Department of Informatics</a> at the <a href="http://www.kit.edu">Karlsruhe Institute of Technology (KIT)</a>, which is of course whom I originally made the demo program for. The text, which I wrote for that occasion, can be viewed in German at the original <a href="http://www.informatik.kit.edu/309_6813.php">news article about the viral video</a> (or in the screenshots below). I have translated it into English below, since it contains some further comments about the video.</p><div style="text-align: center"><a href="/2013/1024-Sound-of-Sorting-KIT-Informatik/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2013/0506-STX-B+Tree-on-Raspberry-Pi/"><img src="/2013/0506-STX-B+Tree-on-Raspberry-Pi/thumb.jpg" width="300" height="206" alt="Photo of my Raspberry Pi Model B" title="Photo of my Raspberry Pi Model B" /></a></div><h1>STX B+ Tree Speed Test Measurements on Raspberry Pi (Model B)</h1><p class="info">Posted on 2013-05-06 09:48 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2013/0506-STX-B+Tree-on-Raspberry-Pi/">Permlink</a> with <a href="/2013/0506-STX-B+Tree-on-Raspberry-Pi/#notes">1 Comments</a>. Tags: <a href="/tags/stx-btree.html">stx-btree</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>The <a href="http://www.raspberrypi.org/">Raspberry Pi</a> is maybe one of the most hyped embedded system projects in the last year, and I also got myself one for experiments. People are doing amazing things with this Linux-in-a-box SoC. Doubtlessly, the popularity is due to the standardized platform and a large community forming around it, which makes fixing the many small problems with Linux on ARM systems feasible. For me, the Raspberry Pi is an alternative architecture on which to test my algorithms and libraries, which exhibits somewhat <b>different characteristics</b> than the highly optimized desktop CPUs.</p><p>So I decided to run my <a href="/2007/stx-btree/">STX B+ Tree speed test</a> on the Raspberry Pi Model B, because most people use the SoC for multimedia purposes and little other memory performance data is available. The B+ tree speed test gives <b>insight into the platform&apos;s overall memory and processing performance</b>, and thus yields a better assessment of how useful the system is for general purpose applications (unlike multimedia decoding). Most benchmarks focus solely on floating point or integer arithmetic, which alone are very poor indicators for overall system performance. The Raspberry Pi forums say it has performance similar to a &quot;Pentium 2 with 300 MHz&quot;, but that is for arithmetic.</p><div style="text-align: center"><a href="/2013/0506-STX-B+Tree-on-Raspberry-Pi/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><h1>STX B+ Tree Measuring Memory Usage with malloc_count</h1><p class="info">Posted on 2013-05-05 09:44 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2013/0505-STX-B+Tree-Memory-Usage/">Permlink</a> with <a href="/2013/0505-STX-B+Tree-Memory-Usage/#notes">2 Comments</a>. Tags: <a href="/tags/stx-btree.html">stx-btree</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>Within the next few days, a new version of my popular <a href="/2007/stx-btree">STX B+ Tree</a> library will be released. In light of this imminent release, I created a <b>memory profile</b> with my <a href="/2013/malloc_count/"><code>malloc_count</code> tool</a>, comparing the requirements of four different C++ maps with integer keys and values.</p><p>The test is really simple: create a map container, insert 8 Mi random integer key/value pairs, and destruct it. The memory profile shows the amount of memory over time as allocated via <code>malloc()</code> or <code>new</code>. The test encompasses the usual gcc STL&apos;s <b><code>map</code></b> which is a red-black tree, the older <b><code>hash_map</code></b> from gcc&apos;s STL extensions, the newer gcc C++ <b><code>tr1::unordered_map</code></b>, and of course the <b><code>stx::btree_map</code></b> with default configuration. As a reference, I also added the usual STL vector and deque (not map containers), to verify the plotting facilities.</p><p>To isolate <b>heap fragmentation</b>, the profiler <code>fork()</code>s separate process contexts before each run. To avoid problems with multiple equal random keys, the multimap variant of all containers is used. Here is the memory profile (also included in the STX B+ Tree tarball):</p><p style="text-align: center"> <a href="/2013/0505-STX-B+Tree-Memory-Usage/memprofile.pdf"><img alt="Memory profile of map containers" src="/2013/0505-STX-B+Tree-Memory-Usage/memprofile.png" title="Memory profile of map containers" width="700" height="490" /></a></p><div style="text-align: center"><a href="/2013/0505-STX-B+Tree-Memory-Usage/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2013/0124-GCC-Output-Assembler-Code/"><img src="/2013/0124-GCC-Output-Assembler-Code/thumb.jpg" width="300" height="209" alt="Instacode coloring of assembler code" title="Instacode coloring of assembler code" /></a></div><h1>Coding Tricks 101: How to Save the Assembler Code Generated by GCC</h1><p class="info">Posted on 2013-01-24 18:07 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2013/0124-GCC-Output-Assembler-Code/">Permlink</a> with <a href="/2013/0124-GCC-Output-Assembler-Code/#notes">2 Comments</a>. Tags: <a href="/tags/c++.html">c++</a> <a href="/tags/coding_tricks.html">coding tricks</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>This is the first issue of a series of blog posts about some Linux coding tricks I have collected in the last few years.</p><p>Folklore says that compilers are among the most complex computer programs written today. They incorporate many optimization algorithms, inline functions and fold constant expressions; all without changing output, correctness or side effects of the code. If you think about it, the work <a class="exp" href="http://gcc.gnu.org"><code>gcc</code></a>, <a class="exp" href="http://www.llvm.org"><code>llvm</code></a> and other compilers do is really amazing and mostly works just great.</p><p>Sometimes, however, you want to know exactly what a compiler does with your C/C++ code. Most straight-forward questions can be answered using a debugger. However, if you want to verify whether the compiler really applies those optimizations to your program, that your intuition expects it to do, then a debugger is usually not useful, because optimized programs can look very different from the original. Some example questions are:</p><ul> <li>Is a local integer variable stored in a register and how long does it exist?</li> <li>Does the compiler use special instructions for a simple copy loop?</li> <li>Are special conditional instructions used for an <code>if</code> or <code>switch</code> statement?</li> <li>Is a specific function inlined or called each time?</li></ul><p>These questions can be answered definitely by investigating the compiler&apos;s output. On the Net, there are multiple &quot;online compilers,&quot; which can visualize the assembler output of popular compilers for small pieces of code: see the &quot;<a href="http://gcc.godbolt.org/">GCC Explorer</a>&quot; or &quot;<a href="http://assembly.ynh.io/">C/C++ to Assembly v2</a>&quot;. However, for inspecting parts of a larger project, these tools are unusable, because the interesting pieces are embedded in much larger source files.</p><p>Luckily, <code>gcc</code> does not output binary machine code directly. Instead, it internally writes assembler code, which then is translated by <code>as</code> into binary machine code (actually, <code>gcc</code> creates more intermediate structures). This internal assembler code can be outputted to a file, with some annotation to make it easier to read.</p><div style="text-align: center"><a href="/2013/0124-GCC-Output-Assembler-Code/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><div style="float: right; clear: right; margin: 12pt 0pt 12pt 12pt; font-size: smaller; text-align: center" class="aimg"><a href="/2008/0901-stacktrace-demangled/"><img src="/2008/0901-stacktrace-demangled/thumb.jpg" width="300" height="191" alt="Instacode coloring of stacktrace" title="Instacode coloring of stacktrace" /></a></div><h1>C++ Code Snippet - Print Stack Backtrace Programmatically with Demangled Function Names</h1><p class="info">Posted on 2008-09-01 22:30 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2008/0901-stacktrace-demangled/">Permlink</a> with <a href="/2008/0901-stacktrace-demangled/#notes">34 Comments</a>. Tags: <a href="/tags/c++.html">c++</a> <a href="/tags/code-snippet.html">code-snippet</a> <a href="/tags/coding_tricks.html">coding tricks</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>Yesterday I was tasked to analyzed an inner function of a reasonably complex software package. The inner function was called thousands of times from many different parts of the program, a simple counter print-out showed that. However I was interested in which execution paths reach this inner function and how often the different parts access the function.</p><p>My straight-forward idea was to dump a stack backtrace each time the inner function is called, similar to the one printed by a debugger. However I needed some code snippet to <b>dump the stack backtrace programmatically</b>, without using <code>gdb</code> to halt the program each time.</p><p>Stack backtraces can be saved with <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace(3)</a>, resolved into symbolic names using <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace_symbols(3)</a> and printed using <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace_symbols_fd(3)</a>. These functions are well documented and fairly easy to use.</p><p>However I was debugging a C++ program, which made heavy use of templates and classes. C++ symbols names (including namespace, class and parameters) are mangled by the compiler into plain text symbols: e.g. the function <code>N::A&lt;int&gt;::B::func(int)</code> becomes the symbol <code>_ZN1N1AIiE1B4funcEi</code>. This makes the standard backtrace output very unreadable for C++ programs.</p><p>To demangle these strings the GNU <code>libstdc++</code> library (integrated into the GNU Compiler Collection) provides a function called <a href="/2008/0901-stacktrace-demangled/cxa_demangle.html">__cxa_demangle()</a>. Combined with <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace(3)</a> a pretty stack backtrace can be outputted. The demangling function only works for programs compiled with <code>g++</code>.</p><p>The following header file contains a function <code>print_stacktrace()</code>, which uses <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace(3)</a>, <a href="/2008/0901-stacktrace-demangled/backtrace.3.html">backtrace_symbols(3)</a> and <a href="/2008/0901-stacktrace-demangled/cxa_demangle.html">__cxa_demangle()</a> to print a readable C++ stack backtrace.</p><div style="text-align: center"><a href="/2008/0901-stacktrace-demangled/">This blog entry continues on the next page ...</a></div></div><br style="clear:right" /><h1>C++ Code Snippet - Compressing STL Strings with zlib</h1><p class="info">Posted on 2007-03-28 18:23 by <a href="/about/">Timo Bingmann</a><a href="http://plus.google.com/+TimoBingmann?rel=author"></a> at <a href="/2007/0328-ZLibString.html">Permlink</a> with <a href="/2007/0328-ZLibString.html#notes">11 Comments</a>. Tags: <a href="/tags/c++.html">c++</a> <a href="/tags/code-snippet.html">code-snippet</a> <a href="/tags/frontpage.html">frontpage</a></p><div class="textcontent"><p>The <a href="http://www.zlib.net">zlib library</a> can be found on virtually every computer. It is THE general-purpose lossless patent-free compression library.</p><p>This small C++ code snippet features a pair of functions which use this ubiquitous library to compress ordinary STL strings. There are many uses for this code snippet, like compressing string data stored in a database or binary data transfered over a network. Keep in mind that the compressed string data is binary, so the string&apos;s <code>c_str()</code> representation must be avoided.</p><p>To compile the following small program use &quot;<code>gcc testzlib.cc -o testzlib -lz</code>&quot; where testzlib.cc is the code.</p><div class="codesnippet codeframe" style="font-size: 10pt; font-family: monospace"><pre><tt><span class="comment">// Copyright 2007 Timo Bingmann &lt;tb@panthema.net&gt;</span>
<span class="comment">// Distributed under the Boost Software License, Version 1.0.</span>
<span class="comment">// (See http://www.boost.org/LICENSE_1_0.txt)</span>

<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;string&gt;</span>
<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;stdexcept&gt;</span>
<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;iostream&gt;</span>
<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;iomanip&gt;</span>
<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;sstream&gt;</span>

<span class="preproc">#include</span><span class="normal"> </span><span class="string">&lt;zlib.h&gt;</span>

<span class="comment">/** Compress a STL string using zlib with given compression level and return</span>
<span class="comment">  * the binary data. */</span>
<span class="normal">std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> </span><span class="function">compress_string</span><span class="symbol">(</span><span class="keyword">const</span><span class="normal"> std</span><span class="symbol">::</span><span class="normal">string</span><span class="symbol">&amp;</span><span class="normal"> str</span><span class="symbol">,</span>
<span class="normal">                            </span><span class="type">int</span><span class="normal"> compressionlevel </span><span class="symbol">=</span><span class="normal"> Z_BEST_COMPRESSION</span><span class="symbol">)</span>
<span class="cbracket">{</span>
<span class="normal">    </span><span class="usertype">z_stream</span><span class="normal"> zs</span><span class="symbol">;</span><span class="normal">                        </span><span class="comment">// z_stream is zlib's control structure</span>
<span class="normal">    </span><span class="function">memset</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="keyword">sizeof</span><span class="symbol">(</span><span class="normal">zs</span><span class="symbol">));</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="function">deflateInit</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">,</span><span class="normal"> compressionlevel</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> Z_OK</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">throw</span><span class="symbol">(</span><span class="normal">std</span><span class="symbol">::</span><span class="function">runtime_error</span><span class="symbol">(</span><span class="string">"deflateInit failed while compressing."</span><span class="symbol">));</span>

<span class="normal">    zs</span><span class="symbol">.</span><span class="normal">next_in </span><span class="symbol">=</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">Bytef</span><span class="symbol">*)</span><span class="normal">str</span><span class="symbol">.</span><span class="function">data</span><span class="symbol">();</span>
<span class="normal">    zs</span><span class="symbol">.</span><span class="normal">avail_in </span><span class="symbol">=</span><span class="normal"> str</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">();</span><span class="normal">           </span><span class="comment">// set the z_stream's input</span>

<span class="normal">    </span><span class="type">int</span><span class="normal"> ret</span><span class="symbol">;</span>
<span class="normal">    </span><span class="type">char</span><span class="normal"> outbuffer</span><span class="symbol">[</span><span class="number">32768</span><span class="symbol">];</span>
<span class="normal">    std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> outstring</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// retrieve the compressed bytes blockwise</span>
<span class="normal">    </span><span class="keyword">do</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        zs</span><span class="symbol">.</span><span class="normal">next_out </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">reinterpret_cast</span><span class="symbol">&lt;</span><span class="normal">Bytef</span><span class="symbol">*&gt;(</span><span class="normal">outbuffer</span><span class="symbol">);</span>
<span class="normal">        zs</span><span class="symbol">.</span><span class="normal">avail_out </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">sizeof</span><span class="symbol">(</span><span class="normal">outbuffer</span><span class="symbol">);</span>

<span class="normal">        ret </span><span class="symbol">=</span><span class="normal"> </span><span class="function">deflate</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">,</span><span class="normal"> Z_FINISH</span><span class="symbol">);</span>

<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">outstring</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">&lt;</span><span class="normal"> zs</span><span class="symbol">.</span><span class="normal">total_out</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            </span><span class="comment">// append the block to the output string</span>
<span class="normal">            outstring</span><span class="symbol">.</span><span class="function">append</span><span class="symbol">(</span><span class="normal">outbuffer</span><span class="symbol">,</span>
<span class="normal">                             zs</span><span class="symbol">.</span><span class="normal">total_out </span><span class="symbol">-</span><span class="normal"> outstring</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="cbracket">}</span><span class="normal"> </span><span class="keyword">while</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ret </span><span class="symbol">==</span><span class="normal"> Z_OK</span><span class="symbol">);</span>

<span class="normal">    </span><span class="function">deflateEnd</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">);</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ret </span><span class="symbol">!=</span><span class="normal"> Z_STREAM_END</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal">          </span><span class="comment">// an error occurred that was not EOF</span>
<span class="normal">        std</span><span class="symbol">::</span><span class="usertype">ostringstream</span><span class="normal"> oss</span><span class="symbol">;</span>
<span class="normal">        oss </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"Exception during zlib compression: ("</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> ret </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">") "</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> zs</span><span class="symbol">.</span><span class="normal">msg</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">throw</span><span class="symbol">(</span><span class="normal">std</span><span class="symbol">::</span><span class="function">runtime_error</span><span class="symbol">(</span><span class="normal">oss</span><span class="symbol">.</span><span class="function">str</span><span class="symbol">()));</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="keyword">return</span><span class="normal"> outstring</span><span class="symbol">;</span>
<span class="cbracket">}</span>

<span class="comment">/** Decompress an STL string using zlib and return the original data. */</span>
<span class="normal">std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> </span><span class="function">decompress_string</span><span class="symbol">(</span><span class="keyword">const</span><span class="normal"> std</span><span class="symbol">::</span><span class="normal">string</span><span class="symbol">&amp;</span><span class="normal"> str</span><span class="symbol">)</span>
<span class="cbracket">{</span>
<span class="normal">    </span><span class="usertype">z_stream</span><span class="normal"> zs</span><span class="symbol">;</span><span class="normal">                        </span><span class="comment">// z_stream is zlib's control structure</span>
<span class="normal">    </span><span class="function">memset</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">,</span><span class="normal"> </span><span class="keyword">sizeof</span><span class="symbol">(</span><span class="normal">zs</span><span class="symbol">));</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="function">inflateInit</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">!=</span><span class="normal"> Z_OK</span><span class="symbol">)</span>
<span class="normal">        </span><span class="keyword">throw</span><span class="symbol">(</span><span class="normal">std</span><span class="symbol">::</span><span class="function">runtime_error</span><span class="symbol">(</span><span class="string">"inflateInit failed while decompressing."</span><span class="symbol">));</span>

<span class="normal">    zs</span><span class="symbol">.</span><span class="normal">next_in </span><span class="symbol">=</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">Bytef</span><span class="symbol">*)</span><span class="normal">str</span><span class="symbol">.</span><span class="function">data</span><span class="symbol">();</span>
<span class="normal">    zs</span><span class="symbol">.</span><span class="normal">avail_in </span><span class="symbol">=</span><span class="normal"> str</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">();</span>

<span class="normal">    </span><span class="type">int</span><span class="normal"> ret</span><span class="symbol">;</span>
<span class="normal">    </span><span class="type">char</span><span class="normal"> outbuffer</span><span class="symbol">[</span><span class="number">32768</span><span class="symbol">];</span>
<span class="normal">    std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> outstring</span><span class="symbol">;</span>

<span class="normal">    </span><span class="comment">// get the decompressed bytes blockwise using repeated calls to inflate</span>
<span class="normal">    </span><span class="keyword">do</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">        zs</span><span class="symbol">.</span><span class="normal">next_out </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">reinterpret_cast</span><span class="symbol">&lt;</span><span class="normal">Bytef</span><span class="symbol">*&gt;(</span><span class="normal">outbuffer</span><span class="symbol">);</span>
<span class="normal">        zs</span><span class="symbol">.</span><span class="normal">avail_out </span><span class="symbol">=</span><span class="normal"> </span><span class="keyword">sizeof</span><span class="symbol">(</span><span class="normal">outbuffer</span><span class="symbol">);</span>

<span class="normal">        ret </span><span class="symbol">=</span><span class="normal"> </span><span class="function">inflate</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">,</span><span class="normal"> </span><span class="number">0</span><span class="symbol">);</span>

<span class="normal">        </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">outstring</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">&lt;</span><span class="normal"> zs</span><span class="symbol">.</span><span class="normal">total_out</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span>
<span class="normal">            outstring</span><span class="symbol">.</span><span class="function">append</span><span class="symbol">(</span><span class="normal">outbuffer</span><span class="symbol">,</span>
<span class="normal">                             zs</span><span class="symbol">.</span><span class="normal">total_out </span><span class="symbol">-</span><span class="normal"> outstring</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">());</span>
<span class="normal">        </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="cbracket">}</span><span class="normal"> </span><span class="keyword">while</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ret </span><span class="symbol">==</span><span class="normal"> Z_OK</span><span class="symbol">);</span>

<span class="normal">    </span><span class="function">inflateEnd</span><span class="symbol">(&amp;</span><span class="normal">zs</span><span class="symbol">);</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">ret </span><span class="symbol">!=</span><span class="normal"> Z_STREAM_END</span><span class="symbol">)</span><span class="normal"> </span><span class="cbracket">{</span><span class="normal">          </span><span class="comment">// an error occurred that was not EOF</span>
<span class="normal">        std</span><span class="symbol">::</span><span class="usertype">ostringstream</span><span class="normal"> oss</span><span class="symbol">;</span>
<span class="normal">        oss </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"Exception during zlib decompression: ("</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> ret </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">") "</span>
<span class="normal">            </span><span class="symbol">&lt;&lt;</span><span class="normal"> zs</span><span class="symbol">.</span><span class="normal">msg</span><span class="symbol">;</span>
<span class="normal">        </span><span class="keyword">throw</span><span class="symbol">(</span><span class="normal">std</span><span class="symbol">::</span><span class="function">runtime_error</span><span class="symbol">(</span><span class="normal">oss</span><span class="symbol">.</span><span class="function">str</span><span class="symbol">()));</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="keyword">return</span><span class="normal"> outstring</span><span class="symbol">;</span>
<span class="cbracket">}</span>

<span class="comment">/** Small dumb tool (de)compressing cin to cout. It holds all input in memory,</span>
<span class="comment">  * so don't use it for huge files. */</span>
<span class="type">int</span><span class="normal"> </span><span class="function">main</span><span class="symbol">(</span><span class="type">int</span><span class="normal"> argc</span><span class="symbol">,</span><span class="normal"> </span><span class="type">char</span><span class="symbol">*</span><span class="normal"> argv</span><span class="symbol">[])</span>
<span class="cbracket">{</span>
<span class="normal">    std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> allinput</span><span class="symbol">;</span>

<span class="normal">    </span><span class="keyword">while</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">std</span><span class="symbol">::</span><span class="normal">cin</span><span class="symbol">.</span><span class="function">good</span><span class="symbol">())</span><span class="normal">     </span><span class="comment">// read all input from cin</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">        </span><span class="type">char</span><span class="normal"> inbuffer</span><span class="symbol">[</span><span class="number">32768</span><span class="symbol">];</span>
<span class="normal">        std</span><span class="symbol">::</span><span class="normal">cin</span><span class="symbol">.</span><span class="function">read</span><span class="symbol">(</span><span class="normal">inbuffer</span><span class="symbol">,</span><span class="normal"> </span><span class="keyword">sizeof</span><span class="symbol">(</span><span class="normal">inbuffer</span><span class="symbol">));</span>
<span class="normal">        allinput</span><span class="symbol">.</span><span class="function">append</span><span class="symbol">(</span><span class="normal">inbuffer</span><span class="symbol">,</span><span class="normal"> std</span><span class="symbol">::</span><span class="normal">cin</span><span class="symbol">.</span><span class="function">gcount</span><span class="symbol">());</span>
<span class="normal">    </span><span class="cbracket">}</span>

<span class="normal">    </span><span class="keyword">if</span><span class="normal"> </span><span class="symbol">(</span><span class="normal">argc </span><span class="symbol">&gt;=</span><span class="normal"> </span><span class="number">2</span><span class="normal"> </span><span class="symbol">&amp;&amp;</span><span class="normal"> </span><span class="function">strcmp</span><span class="symbol">(</span><span class="normal">argv</span><span class="symbol">[</span><span class="number">1</span><span class="symbol">],</span><span class="normal"> </span><span class="string">"-d"</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">==</span><span class="normal"> </span><span class="number">0</span><span class="symbol">)</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">        std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> cstr </span><span class="symbol">=</span><span class="normal"> </span><span class="function">decompress_string</span><span class="symbol">(</span><span class="normal"> allinput </span><span class="symbol">);</span>

<span class="normal">        std</span><span class="symbol">::</span><span class="normal">cerr </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"Inflated data: "</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> allinput</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">" -&gt; "</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> cstr</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">" ("</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> std</span><span class="symbol">::</span><span class="function">setprecision</span><span class="symbol">(</span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> std</span><span class="symbol">::</span><span class="normal">fixed</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="symbol">(</span><span class="normal"> </span><span class="symbol">((</span><span class="type">float</span><span class="symbol">)</span><span class="normal">cstr</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal">allinput</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">-</span><span class="normal"> </span><span class="number">1.0</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">*</span><span class="normal"> </span><span class="number">100.0</span><span class="normal"> </span><span class="symbol">)</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"% increase).</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">;</span>

<span class="normal">        std</span><span class="symbol">::</span><span class="normal">cout </span><span class="symbol">&lt;&lt;</span><span class="normal"> cstr</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>
<span class="normal">    </span><span class="keyword">else</span>
<span class="normal">    </span><span class="cbracket">{</span>
<span class="normal">        std</span><span class="symbol">::</span><span class="usertype">string</span><span class="normal"> cstr </span><span class="symbol">=</span><span class="normal"> </span><span class="function">compress_string</span><span class="symbol">(</span><span class="normal"> allinput </span><span class="symbol">);</span>

<span class="normal">        std</span><span class="symbol">::</span><span class="normal">cerr </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"Deflated data: "</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> allinput</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">" -&gt; "</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> cstr</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">" ("</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> std</span><span class="symbol">::</span><span class="function">setprecision</span><span class="symbol">(</span><span class="number">1</span><span class="symbol">)</span><span class="normal"> </span><span class="symbol">&lt;&lt;</span><span class="normal"> std</span><span class="symbol">::</span><span class="normal">fixed</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="symbol">(</span><span class="normal"> </span><span class="symbol">(</span><span class="number">1.0</span><span class="normal"> </span><span class="symbol">-</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal">cstr</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">()</span><span class="normal"> </span><span class="symbol">/</span><span class="normal"> </span><span class="symbol">(</span><span class="type">float</span><span class="symbol">)</span><span class="normal">allinput</span><span class="symbol">.</span><span class="function">size</span><span class="symbol">())</span><span class="normal"> </span><span class="symbol">*</span><span class="normal"> </span><span class="number">100.0</span><span class="symbol">)</span>
<span class="normal">                  </span><span class="symbol">&lt;&lt;</span><span class="normal"> </span><span class="string">"% saved).</span><span class="specialchar">\n</span><span class="string">"</span><span class="symbol">;</span>

<span class="normal">        std</span><span class="symbol">::</span><span class="normal">cout </span><span class="symbol">&lt;&lt;</span><span class="normal"> cstr</span><span class="symbol">;</span>
<span class="normal">    </span><span class="cbracket">}</span>
<span class="cbracket">}</span></tt></pre></div></div><br style="clear:right" /></div><div style="text-align: right; padding: 8pt; font-size: 12px"><a href="/xmlfeed/weblog-rss20.xml"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPAgMAAAAOp6AcAAAADFBMVEVmZmb/ZgD///+JjnlbTUWmAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABQAAAADwCexKkxAAAAWUlEQVQYlWNgwAa0VmGAFQyqoSCQ/x8J/CBFMCt0ZdTU/F/7/+1HEkydFpoKVPn+93sUlUujQvP/7UcRTAuNDJ2a//s/imDqtKVZofm/1qGYSZk7sfodGwAAiobBJtffoNAAAAAASUVORK5CYII=" alt="RSS 2.0 Weblog Feed" width="80" height="15"/></a> <a href="/xmlfeed/weblog-atom10.xml"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPAgMAAAAOp6AcAAAADFBMVEVmZmb/ZgD///+JjnlbTUWmAAAAaklEQVQYlWNgwAa0VmGAFQyqoSCQ/x8J/CBFMDV16rTQ/H/7V//69+//v/3/9oMEI6cuAwr+fv/+/b5d///v//0eJBgWOhMo+Gs9UPAdXDBy6lSYyn9wQZCZS0GCYDPXQcykzJ1Y/Y4NAABKvL80wyoMPgAAAABJRU5ErkJggg==" alt="Atom 1.0 Weblog Feed" width="80" height="15"/></a> <a href="http://validator.w3.org/check?uri=referer"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAB1FBMVEUHQIgIRY0MN4QNRYoSRYsXUpIYVJQeUpUhWpgjUJMjWpgmU5QnXJkuYZ0uYpwwV5YyZJ4zaKM3ZaA5aaI6aqM6a6E8ZqA8Z6BAbaRBbqdCbaVHd61KSkpKcaZQUFBUf69UgbBVVVVXfq9Yg7NZhbJZh7RagrNeXVxeh7RfjLdgYGBiiLZmZmZnZ2doirhpkbt0m8F3m8B3ncJ5lb55ocR+ocSDgX+Do8eEpMqGhoaHp8iIpMeJjnmJpseKqMeOqsqPsdCQrcyVlZWVsM2Zs9CZtNCfu9ahoaGhuNShudSivNSjtMWjvNSmpqWnpqSrw9qvxNqyxdmyxdyzsK6zs7Ozx9y0xt21yN22tra4y+K80eK/v7/AwMDExMTEy9DH2ejK2+jM2ujN3uvP0dLR0NDR3uvS3uvS3+zU4u3V1dXY2dnY4u7Y4+3b5e/d3d3d5u/d5/De3t7f39/h4uLj4uHj6/Ll7PXm7fTn7/Xo7/Tp7/bq7Ozr6unr8ffw8PDw9vvx9fny+P7z8/Pz9vnz9vv3+fv4+vz5+vz6+vr6+/36/P36///7+/77/Pz7/f37/f78/Pz8/f38/f79/f39/f79/f/9/v79///+/v7+/v////3///+tYR2LAAABKklEQVQ4y2PQoTJg0JlNVYDPQBsyAMTAqaFes8tdsmdPCtA3MDStr3GKKK6myMAprgJ9pcpWs/MlRExYJBvNZLR0sigycHYOV1S7mtjsQJ4gf+HIFPXoWMs6qIGzIRiKZs9GFoEaMRuZhhrYqqJXy8uZYauRxC/VHew7e3YTPAxnI5swG6JxNrKBNjB1EFmIgV0+HA6C8pqqzhXG7BbJJROQIwViMYQ7G2oDQQNn57JyG7kxiCfObrBmS5+BHMuYLkTzMnYDm5WY4lOZZRPKZocxes+aPbuwCFsYohiICLvZsKBAMrDTQ7K/StveU8icTzrOL8JdLpOyWJ49u8Bx9ozw8DY7UYW03hhdxZAOSg2c3jN79rSJs1vSKmfOnpFXNJmynELlvExlAADnaZpLFGEC2wAAAABJRU5ErkJggg==" alt="Valid XHTML 1.1" width="80" height="15"/></a> <a href="http://jigsaw.w3.org/css-validator/check/referer"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAB1FBMVEUHQIgIRY0MN4QNRYoSRYsXUpIYVJQeUpUhWpgjUJMjWpgmU5QnXJkuYZ0uYpwwV5YyZJ4zaKM3ZaA5aaI6aqM6a6E8ZqA8Z6BAbaRBbqdCbaVHd61KSkpKcaZQUFBUf69UgbBVVVVXfq9Yg7NZhbJZh7RagrNeXVxeh7RfjLdgYGBiiLZmZmZnZ2doirhpkbt0m8F3m8B3ncJ5lb55ocR+ocSDgX+Do8eEpMqGhoaHp8iIpMeJjnmJpseKqMeOqsqPsdCQrcyVlZWVsM2Zs9CZtNCfu9ahoaGhuNShudSivNSjtMWjvNSmpqWnpqSrw9qvxNqyxdmyxdyzsK6zs7Ozx9y0xt21yN22tra4y+K80eK/v7/AwMDExMTEy9DH2ejK2+jM2ujN3uvP0dLR0NDR3uvS3uvS3+zU4u3V1dXY2dnY4u7Y4+3b5e/d3d3d5u/d5/De3t7f39/h4uLj4uHj6/Ll7PXm7fTn7/Xo7/Tp7/bq7Ozr6unr8ffw8PDw9vvx9fny+P7z8/Pz9vnz9vv3+fv4+vz5+vz6+vr6+/36/P36///7+/77/Pz7/f37/f78/Pz8/f38/f79/f39/f79/f/9/v79///+/v7+/v////3///+tYR2LAAABEUlEQVQ4y2PQoTJg0JlNVYDPQBsyAMTAqaFes8tdsmdPCtA3MDStr3GKKK6myMAprgJ9pcpWs/MlRExYJBvNZLR0sigycHYOV1S7mtjsQJ4gf+HIFPXoWMs6mIEQCsIjwhKoga0qerW8nBm2Gkn8Ut3BvrNnN8HCcDYM2cBIogzs8uFwEJTXVHWuMGa3SC6ZgIgUqCEwdxJr4OxcVm4jNwbxxNkN1mzpM2ajGIjsPGK9PLtZiSk+lVk2oWx2GKP3rNmzC4tQwpDoIIQb2Okh2V+lbe8pZM4nHecX4S6XSVksz55d4Dh7Rnh4m52oQlpvjK5iSAelBk7vmT172sTZLWmVM2fPyCuaTFlOoXJepjIAANlljDGY/l5pAAAAAElFTkSuQmCC" alt="Valid CSS (2.1)" width="80" height="15"/></a><br/>Copyright 2005-2018 <a href="/about/">Timo Bingmann</a> - <a href="/about/impressum.html">Impressum</a></div><script type="text/javascript">var _paq = _paq || []; _paq.push(["trackPageView"]); _paq.push(["enableLinkTracking"]);(function() {var u=(("https:" == document.location.protocol) ? "https" : "http") + "://panthema.net/wik-331/"; _paq.push(["setTrackerUrl", u+"js/"]); _paq.push(["setSiteId", "2"]);var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";g.defer=true; g.async=true; g.src=u+"js/"; s.parentNode.insertBefore(g,s);})();</script><noscript><p><img src="http://panthema.net/wik-331/js/?idsite=2&amp;rec=1" style="border:0" alt="" /></p></noscript></body></html>