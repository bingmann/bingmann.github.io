<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Stxxl: Installation, usage, configuration (Windows &ndash; Microsoft Visual C++)</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Stxxl
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Installation, usage, configuration (Windows &ndash; Microsoft Visual C++) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="download_msvc"></a>
Download and Extraction</h2>
<ul>
<li>Install the <a href="http://www.boost.org">Boost</a> libraries (required).</li>
<li>Download the latest <code>Stxxl</code> zip file from <a href="http://sourceforge.net/projects/stxxl/files/stxxl/">SourceForge</a></li>
<li>Unpack the zip file in some directory (e.&#160;g. <code>'C:\'</code> )</li>
<li>Change to <code>stxxl</code> base directory: <code>cd</code> <code>stxxl-x.y.z</code> </li>
</ul>
<h2><a class="anchor" id="library_compilation_msvc"></a>
Library Compilation</h2>
<ul>
<li>Create <code>make.settings.local</code> in the base directory according to your system configuration:<ul>
<li>set <code>BOOST_ROOT</code> variable according to the Boost root path, e.&#160;g. BOOST_ROOT = "C:\Program Files (x86)\boost\boost_1_40_0"#</li>
<li>(optionally) set <code>STXXL_ROOT</code> variable to <code>S<small>TXXL</small></code> root directory</li>
<li>(optionally) set <code>OPT</code> variable to <code>/O2</code> or any other VC++ optimization level you like, add -D_SECURE_SCL=0 to switch off iterator checking, which improves performance</li>
<li>(optionally) set <code>DEBUG_COMPILER=/MDd</code> /Zi and DEBUG_LINKER=/DEBUG enable debugging</li>
</ul>
</li>
<li>Open the <code>stxxl.vcproj</code> file (VS Solution Object) in Visual Studio. The file is located in the <code>STXXL_ROOT</code> directory Press F7 to build the library. The library file (libstxxl.lib) should appear in <code>STXXL_ROOT\lib</code> directory Or build the library and the S<small>TXXL</small> test programs by pressing Ctrl-Alt-F7 (or choosing from 'Build' drop-down menu Rebuild Solution)</li>
<li>(alternatively) Compile the library by executing <code>nmake</code> <code>library_msvc</code> and the tests by executing <code>nmake</code> <code>tests_msvc</code>, with all the appropriate environment set (e.&#160;g. by using the VS Command Shell)</li>
</ul>
<h2><a class="anchor" id="build_apps"></a>
Building an Application</h2>
<p>Programs using Stxxl can be compiled using options from <code>compiler.options</code> file (in the <code>STXXL_ROOT</code> directory). The linking options for the VC++ linker you can find in <code>linker.options</code> file. In order to accomplish this do the following:</p>
<ul>
<li>Open project property pages (menu Project-&gt;Properties)</li>
<li>Choose C/C++-&gt;Command Line page.</li>
<li>In the 'Additional Options' field insert the contents of the <code>compiler.options</code> file. Make sure that the Runtime libraries/debug options (/MDd or /MD or /MT or /MTd) of the <code>Stxxl</code> library (see above) do not conflict with the options of your project. Use the same options in the <code>Stxxl</code> and your project.</li>
<li>Choose Linker-&gt;Command Line page.</li>
<li>In the 'Additional Options' field insert the contents of the <code>linker.options</code> file.</li>
</ul>
<p><br/>
 If you use make files you can include the <code>make.settings</code> file in your make files and use <code>STXXL_COMPILER_OPTIONS</code> and <code>STXXL_LINKER_OPTIONS</code> variables, defined therein.</p>
<p>For example: <br/>
 </p>
<div class="fragment"><pre class="fragment">cl -c my_example.cpp $(STXXL_COMPILER_OPTIONS) </pre></div><p> <br/>
 </p>
<div class="fragment"><pre class="fragment">link my_example.obj /out:my_example.exe $(STXXL_LINKER_OPTIONS) </pre></div><p><br/>
 The <code>STXXL_ROOT\test\WinGUI</code> directory contains an example MFC GUI project that uses <code>Stxxl</code>. In order to compile it open the WinGUI.vcproj file in Visual Studio .NET. Change if needed the Compiler and Linker Options of the project (see above).</p>
<p>Before you try to run one of the <code>S<small>TXXL</small></code> examples (or your own <code>S<small>TXXL</small></code> program) you must configure the disk space that will be used as external memory for the library. For instructions how to do that, see the next section.</p>
<h2><a class="anchor" id="space"></a>
Disk space</h2>
<p>To get best performance with <code>S<small>TXXL</small></code> you should assign separate disks to it. These disks should be used by the library only. Since <code>S<small>TXXL</small></code> is developed to exploit disk parallelism, the performance of your external memory application will increase if you use more than one disk. But from how many disks your application can benefit depends on how "I/O bound" it is. With modern disk bandwidths of about 50-75 MiB/s most of applications are I/O bound for one disk. This means that if you add another disk the running time will be halved. Adding more disks might also increase performance significantly.</p>
<h2><a class="anchor" id="configuration"></a>
Disk configuration file</h2>
<p>You must define the disk configuration for an <code>S<small>TXXL</small></code> program in a file named <code>'</code>.stxxl' that must reside in the same directory where you execute the program. You can change the default file name for the configuration file by setting the environment variable <code>STXXLCFG</code> .</p>
<p>Each line of the configuration file describes a disk. A disk description uses the following format:<br/>
 <code>disk=full_disk_filename</code>,capacity,access_method</p>
<p>Description of the parameters:</p>
<ul>
<li><code>full_disk_filename</code> : full disk filename. In order to access disks S<small>TXXL</small> uses file access methods. Each disk is represented as a file. If you have a disk called <code>e:</code> then the correct value for the <code>full_disk_filename</code> would be <code>e:\some_file_name</code> ,</li>
<li><code>capacity</code> : maximum capacity of the disk in megabytes</li>
<li><code>access_method</code> : <code>S<small>TXXL</small></code> has a number of different file access implementations for WINDOWS, choose one of them:<ul>
<li><code>syscall</code> : use <code>read</code> and <code>write</code> POSIX system calls (slow)</li>
<li><code>wincall:</code> performs disks transfers using <code>ReadFile</code> and <code>WriteFile</code> WinAPI calls This method supports direct I/O that avoids superfluous copying of data pages in the Windows kernel. This is the best (and default) method in Stxxl for Windows.</li>
<li><code>boostfd</code> : access the file using a Boost file descriptor</li>
<li><code>fileperblock_syscall</code>, <code>fileperblock_wincall</code>, <code>fileperblock_boostfd</code> : same as above, but take a single file per block, using full_disk_filename as file name prefix. Usually provide worse performance than the standard variants, but release freed blocks to the file system immediately.</li>
<li><code>memory</code> : keeps all data in RAM, for quicker testing</li>
<li><code>wbtl</code> : library-based write-combining (good for writing small blocks onto SSDs), based on <code>syscall</code> </li>
</ul>
</li>
</ul>
<p>See also the example configuration file <code>'config_example_win'</code> included in the archive.</p>
<h2><a class="anchor" id="excreation"></a>
Precreating external memory files</h2>
<p>In order to get the maximum performance one should precreate disk files described in the configuration file, before running <code>S<small>TXXL</small></code> applications.</p>
<p>The precreation utility is included in the set of <code>S<small>TXXL</small></code> utilities ( <code>utils\createdisks.exe</code> ). Run this utility for each disk you have defined in the disk configuration file: </p>
<div class="fragment"><pre class="fragment">utils\createdisks.exe capacity full_disk_filename... </pre></div> </div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
